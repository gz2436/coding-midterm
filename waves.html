<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ocean Waves - Ocean Dreams</title>

  <!-- p5.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js"></script>
  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>


  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      overflow: hidden;
      font-family: 'Courier New', monospace;
      background: #000;
    }

    #canvas-container {
      width: 100vw;
      height: 100vh;
    }

    .nav-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(10, 20, 40, 0.8);
      backdrop-filter: blur(10px);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
      border-bottom: 2px solid rgba(0, 217, 255, 0.3);
    }

    .nav-bar a {
      color: #00d9ff;
      text-decoration: none;
      margin: 0 1rem;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .nav-bar a:hover {
      color: #fff;
      text-shadow: 0 0 10px #00d9ff;
    }

    .nav-bar .home {
      font-size: 1.5rem;
      font-weight: bold;
    }

    .info-panel {
      position: fixed;
      bottom: 2rem;
      left: 2rem;
      background: rgba(10, 20, 40, 0.9);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(0, 217, 255, 0.3);
      border-radius: 10px;
      padding: 1.5rem;
      max-width: 300px;
      color: white;
      z-index: 100;
    }

    .info-panel h2 {
      color: #00d9ff;
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .info-panel p {
      font-size: 0.9rem;
      line-height: 1.5;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 1rem;
    }

    .controls {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.6);
    }

    .controls div {
      margin: 0.3rem 0;
    }

    .music-btn {
      position: fixed;
      top: 5rem;
      right: 2rem;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(0, 217, 255, 0.2);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(0, 217, 255, 0.5);
      color: #00d9ff;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 101;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .music-btn:hover {
      background: rgba(0, 217, 255, 0.4);
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(0, 217, 255, 0.6);
    }

    .music-btn.playing {
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% {
        box-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
      }
      50% {
        box-shadow: 0 0 30px rgba(0, 217, 255, 0.8);
      }
    }

    @media (max-width: 768px) {
      .nav-bar {
        flex-direction: column;
        padding: 0.5rem;
      }

      .nav-bar a {
        margin: 0.3rem;
        font-size: 0.9rem;
      }

      .info-panel {
        bottom: 1rem;
        left: 1rem;
        right: 1rem;
        max-width: none;
      }
    }
  </style>
</head>
<body>

  <nav class="nav-bar">
    <a href="index.html" class="home">&larr; OCEAN DREAMS</a>
    <div>
      <a href="jellyfish.html">JELLYFISH</a>
      <a href="coral.html">CORAL</a>
      <a href="waves.html">WAVES</a>
      <a href="about.html">ABOUT</a>
    </div>
  </nav>

  <div id="canvas-container"></div>

  <button id="music-btn" class="music-btn" title="Toggle Music">
    <i data-feather="volume-2"></i>
  </button>

  <div class="info-panel">
    <h2>OCEAN WAVES</h2>
    <p>Multiple layers of sine waves creating the eternal rhythm of the sea.</p>
    <div class="controls">
      <div><strong>MOUSE:</strong> Drag to create ripples</div>
      <div><strong>CLICK:</strong> Spawn particles</div>
      <div><strong>R KEY:</strong> Reset waves</div>
    </div>
  </div>

  <script>
    let waves = [];
    let particles = [];
    let ripples = [];

    // Music variables
    let osc1, osc2, osc3, reverb;
    let musicPlaying = false;
    let musicBtn;

    function setup() {
      let canvas = createCanvas(windowWidth, windowHeight);
      canvas.parent('canvas-container');
      createWaves();

      for (let i = 0; i < 100; i++) {
        particles.push(new WaterParticle());
      }

      // Setup music
      setupMusic();
      musicBtn = document.getElementById('music-btn');
      musicBtn.addEventListener('click', toggleMusic);

      // Initialize feather icons
      feather.replace();

      // Auto-play music after a short delay
      setTimeout(() => {
        if (!musicPlaying) {
          toggleMusic();
        }
      }, 500);
    }

    function setupMusic() {
      osc1 = new p5.Oscillator('sine');
      osc2 = new p5.Oscillator('sine');
      osc3 = new p5.Oscillator('sine');

      osc1.freq(55);   // A1
      osc2.freq(110);  // A2
      osc3.freq(165);  // E3

      osc1.amp(0);
      osc2.amp(0);
      osc3.amp(0);

      reverb = new p5.Reverb();
      reverb.process(osc1, 9, 5);
      reverb.process(osc2, 7, 4);
      reverb.process(osc3, 6, 3);

      osc1.start();
      osc2.start();
      osc3.start();

      setInterval(() => {
        if (musicPlaying) {
          let t = millis() / 1000;
          osc1.freq(55 + sin(t * 0.08) * 2);
          osc2.freq(110 + cos(t * 0.12) * 4);
          osc3.freq(165 + sin(t * 0.16) * 6);
        }
      }, 100);
    }

    function toggleMusic() {
      userStartAudio();

      if (musicPlaying) {
        osc1.amp(0, 1);
        osc2.amp(0, 1);
        osc3.amp(0, 1);
        musicBtn.innerHTML = '<i data-feather="volume-x"></i>';
        musicBtn.classList.remove('playing');
        musicPlaying = false;
        feather.replace();
      } else {
        osc1.amp(0.09, 1);
        osc2.amp(0.05, 1);
        osc3.amp(0.03, 1);
        musicBtn.innerHTML = '<i data-feather="volume-2"></i>';
        musicBtn.classList.add('playing');
        musicPlaying = true;
        feather.replace();
      }
    }

    function createWaves() {
      waves = [];

      let layers = [
        { y: 0.3, amplitude: 30, speed: 0.01, color: [100, 150, 200, 100] },
        { y: 0.45, amplitude: 40, speed: 0.015, color: [80, 130, 180, 120] },
        { y: 0.6, amplitude: 50, speed: 0.02, color: [60, 110, 160, 150] },
        { y: 0.75, amplitude: 60, speed: 0.025, color: [40, 90, 140, 180] },
        { y: 0.9, amplitude: 70, speed: 0.03, color: [20, 70, 120, 200] }
      ];

      layers.forEach(layer => {
        waves.push(new Wave(layer));
      });
    }

    function windowResized() {
      resizeCanvas(windowWidth, windowHeight);
      createWaves();
    }

    function draw() {
      // Sky to ocean gradient
      setGradient(0, 0, width, height,
        color(135, 206, 235),
        color(0, 105, 148));

      // Draw waves
      waves.forEach(wave => {
        wave.update();
        wave.display();
      });

      // Draw particles
      particles.forEach(particle => {
        particle.update();
        particle.display();
      });

      // Update ripples
      for (let i = ripples.length - 1; i >= 0; i--) {
        let r = ripples[i];
        r.radius += 3;
        r.alpha -= 5;

        push();
        noFill();
        stroke(255, 255, 255, r.alpha);
        strokeWeight(2);
        ellipse(r.x, r.y, r.radius * 2);
        pop();

        if (r.alpha <= 0) {
          ripples.splice(i, 1);
        }
      }
    }

    class Wave {
      constructor(config) {
        this.baseY = height * config.y;
        this.amplitude = config.amplitude;
        this.speed = config.speed;
        this.color = config.color;
        this.offset = random(1000);
        this.points = [];
        this.resolution = 10;
      }

      update() {
        this.offset += this.speed;

        this.points = [];
        for (let x = -this.resolution; x <= width + this.resolution; x += this.resolution) {
          let angle = this.offset + x * 0.01;
          let y = this.baseY + sin(angle) * this.amplitude;
          y += sin(angle * 2 + this.offset * 2) * this.amplitude * 0.3;
          this.points.push({ x, y });
        }
      }

      display() {
        push();
        fill(this.color[0], this.color[1], this.color[2], this.color[3]);
        noStroke();

        beginShape();
        vertex(-10, height + 10);

        this.points.forEach(p => {
          vertex(p.x, p.y);
        });

        vertex(width + 10, height + 10);
        endShape(CLOSE);

        if (this.color[3] > 150) {
          stroke(255, 255, 255, 100);
          strokeWeight(2);
          noFill();

          beginShape();
          this.points.forEach(p => {
            curveVertex(p.x, p.y - 2);
          });
          endShape();
        }

        pop();
      }
    }

    class WaterParticle {
      constructor() {
        this.reset();
      }

      reset() {
        this.x = random(width);
        this.y = random(height * 0.5, height);
        this.size = random(2, 6);
        this.vx = random(-1, 1);
        this.vy = random(-2, -0.5);
        this.alpha = random(100, 255);
        this.life = 255;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;
        this.vy += 0.05;
        this.life -= 2;

        if (this.life <= 0 || this.y > height) {
          this.reset();
        }
      }

      display() {
        push();
        noStroke();
        fill(255, 255, 255, this.alpha * (this.life / 255));
        ellipse(this.x, this.y, this.size);
        pop();
      }
    }

    function setGradient(x, y, w, h, c1, c2) {
      noFill();
      for (let i = y; i <= y + h; i++) {
        let inter = map(i, y, y + h, 0, 1);
        let c = lerpColor(c1, c2, inter);
        stroke(c);
        line(x, i, x + w, i);
      }
    }

    function mousePressed() {
      if (frameCount % 5 === 0) {
        ripples.push({ x: mouseX, y: mouseY, radius: 0, alpha: 255 });
      }
      return false;
    }

    function mouseDragged() {
      if (frameCount % 5 === 0) {
        ripples.push({ x: mouseX, y: mouseY, radius: 0, alpha: 255 });
      }

      // Spawn particles
      for (let i = 0; i < 3; i++) {
        let p = new WaterParticle();
        p.x = mouseX + random(-20, 20);
        p.y = mouseY + random(-20, 20);
        particles.push(p);
      }

      if (particles.length > 300) {
        particles.splice(0, 10);
      }

      return false;
    }

    function keyPressed() {
      if (key === 'r' || key === 'R') {
        createWaves();
      }
      return false;
    }
  </script>

</body>
</html>
